<div class="viz"><X3D width="300px"; height="300px";>

<!--Inserting Generated X3D Scene-->
<scene id="atoms-scene">
  <viewpoint position="0, 0, 13.838308000000001">
    <group/>
  </viewpoint>
  <transform rotation="0, 1, 0, 0.1" id="atoms-rotation">
    <transform translation="-3.14507 -2.3608550000000004 -1.899505">
      <group>
        <group/>
        <group>
          <transform translation="0.5031199999999999 1.4224800000000002 2.7133599999999998">
            <shape>
              <appearance>
                <material diffuseColor="0.188 0.314 0.973"/>
              </appearance>
              <sphere radius="0.71"/>
            </shape>
          </transform>
          <transform translation="1.96238 1.3501900000000002 2.71791">
            <shape>
              <appearance>
                <material diffuseColor="0.565 0.565 0.565"/>
              </appearance>
              <sphere radius="0.76"/>
            </shape>
          </transform>
          <transform translation="2.6580299999999997 0.7009900000000003 1.5650799999999998">
            <shape>
              <appearance>
                <material diffuseColor="0.565 0.565 0.565"/>
              </appearance>
              <sphere radius="0.76"/>
            </shape>
          </transform>
          <transform translation="2.745 2.1990700000000003 1.73935">
            <shape>
              <appearance>
                <material diffuseColor="0.565 0.565 0.565"/>
              </appearance>
              <sphere radius="0.76"/>
            </shape>
          </transform>
          <transform translation="4.0254 2.9225700000000003 2.15294">
            <shape>
              <appearance>
                <material diffuseColor="0.565 0.565 0.565"/>
              </appearance>
              <sphere radius="0.76"/>
            </shape>
          </transform>
          <transform translation="5.407520000000001 2.4292000000000002 1.79771">
            <shape>
              <appearance>
                <material diffuseColor="0.565 0.565 0.565"/>
              </appearance>
              <sphere radius="0.76"/>
            </shape>
          </transform>
          <transform translation="4.87122 3.6663900000000007 1.14601">
            <shape>
              <appearance>
                <material diffuseColor="0.565 0.565 0.565"/>
              </appearance>
              <sphere radius="0.76"/>
            </shape>
          </transform>
          <transform translation="0.18034000000000006 2.1951400000000003 3.29509">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
          <transform translation="0.09999999999999998 0.5766700000000003 3.11543">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
          <transform translation="2.40796 1.1992700000000003 3.69901">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
          <transform translation="2.06088 0.32772000000000023 0.7408099999999997">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
          <transform translation="3.53253 0.10000000000000031 1.78205">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
          <transform translation="2.1336399999999998 2.77754 1.04402">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
          <transform translation="3.9415999999999998 3.4163200000000002 3.1225799999999997">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
          <transform translation="5.50379 1.5418500000000004 1.18318">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
          <transform translation="6.19014 2.5412300000000005 2.53884">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
          <transform translation="5.28788 4.62171 1.44254">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
          <transform translation="4.59302 3.60806 0.10000000000000009">
            <shape>
              <appearance>
                <material diffuseColor="1.0 1.0 1.0"/>
              </appearance>
              <sphere radius="0.31"/>
            </shape>
          </transform>
        </group>
      </group>
    </transform>
  </transform>
</scene>
<!--End of Inserted Scene-->

</X3D>
</div><script>
const rotation = document.getElementById("atoms-rotation");
// get the viz div
const scene = document.getElementsByTagName("x3d")[0];

// stop rotating when the scene is clicked
// if its a long-press, the rotation should continue afterwards
// otherwise, toggle the rotation
let rotating = true;
let start;
let was_rotating_before_click;

scene.addEventListener("mousedown", function() {
    was_rotating_before_click = rotating;
    rotating = false;
    start = Date.now();

    scene.addEventListener("mouseup", function() {
        if (Date.now() - start < 200) {
            // short click: toggle rotation
            rotating = !rotating;
        } else {
            // long click: resume previous rotation
            rotating = was_rotating_before_click;
        }
    });
});

window.setInterval(function() {
    if (!rotating) return;
    // turn `x, y, z, angle` into `x, y, z, angle + 0.1`
    const parts = rotation.getAttribute("rotation").split(", ");
    parts[3] = String(parseFloat(parts[3]) + 0.007);
    rotation.setAttribute("rotation", parts.join(", "));
}, 25);
</script>
